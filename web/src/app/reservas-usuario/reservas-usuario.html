<app-notificaciones></app-notificaciones>
<div class="reservas-usuario-header">
  <button class="btn btn-nueva-reserva" routerLink="/nueva-reserva">
    <svg class="icon-plus" viewBox="0 0 24 24" fill="currentColor">
      <path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
    </svg>
    Nueva reserva
  </button>
  <button class="btn btn-descargar" (click)="descargarReservasPDF()">
    <svg class="icon-pdf" viewBox="0 0 24 24" fill="currentColor">
      <path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6H6zm7 1.5V9h5.5L13 3.5zM6 4h6v5a1 1 0 0 0 1 1h5v10a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1zm2 7v6h2v-2h1a2 2 0 0 0 0-4H8zm2 2h-1v-2h1a1 1 0 0 1 0 2z"/>
    </svg>
    Descargar PDF
  </button>
</div>
<div class="reservas-usuario-scroll">
  <div class="reservas-usuario-lista">
    <div class="tarjeta-reserva-usuario" *ngFor="let reserva of reservasPaginadas" [attr.data-estado]="reserva.estado">
      <div class="tarjeta-header">
        <h3 class="titulo-reserva">{{ reserva.paquete }}</h3>
        <span class="estado-reserva" [ngClass]="reserva.estado">{{ reserva.estado | titlecase }}</span>
      </div>
      <div class="tarjeta-body">
        <p class="fecha-info">
          <svg class="icon-calendar" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
          </svg>
          <strong>Fecha Reservada:</strong>
          {{ reserva.fecha_reservada | date:'dd/MM/yyyy' }}
        </p>
      </div>
      <div class="tarjeta-actions">
        <button
          class="btn btn-cancelar"
          *ngIf="reserva.estado !== 'cancelada'"
          (click)="abrirModalCancelar(reserva)">
          <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
          Cancelar
        </button>
        <button
          class="btn btn-detalles"
          [class.btn-detalles-full]="reserva.estado === 'cancelada'"
          [routerLink]="['/detalles-paquete', reserva.paquete_id]">
          <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          Detalles paquete
        </button>
      </div>
    </div>
    <div class="sin-registros" *ngIf="reservas.length === 0">
      No tienes reservas.
    </div>
  </div>
</div>
<app-paginacion-cliente
  *ngIf="reservas.length > 0 && totalPaginas > 1"
  [paginaActual]="paginaActual"
  [totalPaginas]="totalPaginas"
  (paginaCambiada)="cambiarPagina($event)">
</app-paginacion-cliente>
<div class="modal-cancelar" *ngIf="mostrarModalCancelar">
  <div class="modal-cancelar-backdrop" (click)="cerrarModalCancelar()"></div>
  <div class="modal-cancelar-contenido">
    <h2>¿Cancelar reserva?</h2>
    <p>¿Seguro que quieres cancelar la reserva de <b>{{ reservaSeleccionada?.paquete }}</b>?</p>
    <div class="modal-cancelar-acciones">
      <button class="btn" (click)="cerrarModalCancelar()">Retroceder</button>
      <button class="btn btn-cancelar" (click)="confirmarCancelarReserva()">Cancelar reserva</button>
    </div>
  </div>
</div>