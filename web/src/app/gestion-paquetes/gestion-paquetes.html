<div class="admin-layout">
  <app-sidebar></app-sidebar>
  <div class="main-content">
    <h2 class="titulo-pagina">Gestion de Paquetes</h2>
    <div class="tarjeta-carta">
      <div class="container-imagen">
        <img class="foto-paquete" src="https://picsum.photos/400/300" alt="Imagen aleatoria">
      </div>
      <div class="campos-paquete">
        <div class="fila-paquete">
          <h2 class="titulo-paquete">Título del Paquete</h2>
          <span class="precio-paquete">50&nbsp;€</span>
        </div>
        <p class="descripcion-paquete">Una escapada inolvidable para toda la familia.</p>
      </div>
      <div class="acciones-paquete">
        <button class="editar-paquete" (click)="abrirModal()">Editar</button> <!-- Botón para que se abra el modal editar el paquete -->
        <button class="eliminar-paquete" (click)="abrirModalEliminar()">Eliminar</button> <!-- Botón para que se abra el modal de confirmación de eliminación del paquete -->
      </div>
    </div>
  </div>

  <!-- Modal de Edición -->
  <div class="modal-backdrop" *ngIf="modalAbierto" (click)="cerrarModal()"></div>   <!-- ngIf, si el modal esta abierto, podrás darle click para cerrarlo -->
  <div class="modal-editar" *ngIf="modalAbierto"> <!-- Si el modal está abierto, se muestra el contenido -->
    <div class="modal-header">
      <h3>Editar Paquete</h3>
      <button class="cerrar-modal" (click)="cerrarModal()">×</button> <!-- Botón para cerrar el modal -->
    </div>
    <div class="modal-body">
      <form [formGroup]="formularioPaquete" (ngSubmit)="guardarCambios()">
        <div class="form-group">
          <label for="nombre">Nombre:</label>
          <input type="text" id="nombre" formControlName="nombre" class="form-input">
          <div class="error-msg" *ngIf="formularioPaquete.get('nombre')?.invalid && formularioPaquete.get('nombre')?.touched">
            El nombre es obligatorio
          </div>
        </div>
        
        <div class="form-group">
          <label for="descripcion">Descripción:</label>
          <textarea id="descripcion" formControlName="descripcion" class="form-input" rows="3"></textarea>
          <div class="error-msg" *ngIf="formularioPaquete.get('descripcion')?.invalid && formularioPaquete.get('descripcion')?.touched">
            La descripción es obligatoria
          </div>
        </div>
        
        <div class="form-group">
          <label for="precio">Precio (€):</label>
          <input type="number" id="precio" formControlName="precio" class="form-input">
          <div class="error-msg" *ngIf="formularioPaquete.get('precio')?.invalid && formularioPaquete.get('precio')?.touched">
            El precio debe ser mayor que 0
          </div>
        </div>
        
        <div class="form-group">
          <label for="duracion">Duración (días):</label>
          <input type="number" id="duracion" formControlName="duracion" class="form-input">
        </div>
        
        <div class="form-group">
          <label for="cupo">Cupo:</label>
          <input type="number" id="cupo" formControlName="cupo" class="form-input">
        </div>
        
        <div class="form-group">
      <label for="estado">Estado:</label>
      <select id="estado" formControlName="estado" class="form-input">
        <option value="activo">Activo</option>
        <option value="inactivo">Inactivo</option>
      </select>
    </div>
        <div class="modal-footer">
          <button type="button" class="btn-cancelar" (click)="cerrarModal()">Cancelar</button>
          <button type="submit" class="btn-guardar" [disabled]="formularioPaquete.invalid">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal de Confirmación de Eliminación -->
  <div class="modal-backdrop" *ngIf="modalEliminarAbierto" (click)="cerrarModalEliminar()"></div> <!-- ngIf, si el modal de eliminar esta abierto, podrás darle click para cerrarlo -->
  <div class="modal-confirmar" *ngIf="modalEliminarAbierto"> <!-- Si el modal está abierto, se muestra el contenido -->
    <div class="modal-header">
      <h3>Confirmar Eliminación</h3>
      <button class="cerrar-modal" (click)="cerrarModalEliminar()">×</button> <!-- Botón para cerrar el modal -->
    </div>
    <div class="modal-body">
      <p class="mensaje-confirmacion">¿Estás seguro de que deseas eliminar el paquete "<strong>{{ paqueteActual.nombre }}</strong>"?</p>
      <p class="advertencia">Esta acción no se puede deshacer.</p>
      
      <div class="modal-footer">
        <button type="button" class="btn-cancelar" (click)="cerrarModalEliminar()">Cancelar</button>
        <button type="button" class="btn-eliminar" (click)="eliminarPaquete()">Eliminar</button>
      </div>
    </div>
  </div>
</div>
